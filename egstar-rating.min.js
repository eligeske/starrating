(function(f){var d={allowedit:true,halfstars:true,maxstars:5,starwidth:28,smstarwidth:15,a_speed:200,callback:false};function j(l,m){var n=(d.halfstars)?d.starwidth/2:d.starwidth;l.parents(".eg-rtbtns").next("div").css("width",(n*m)+"px")}function h(n,l,o){var m=n.children(".eg-rating").width()+n.children(".eg-rtdash").width()+27+(d.smstarwidth*d.maxstars);if(d.allowedit){m=m+n.children(".eg-edit").width()}else{m=m-5}l.animate({width:m},d.a_speed,g(n,o,l))}function g(m,n,l){if(d.allowedit){m.children(".eg-edit").fadeIn()}if(typeof(d.callback)==="function"){input=l.next("input");n={rating:n,input:input};d.callback.call(n)}}function c(l,m){l=(d.halfstars)?l*0.5:l;m.width(l*d.smstarwidth)}function b(){j(f(this),f(this).index()+1)}function i(){var n=f(this).index()+1;$par=f(this).parent().parent();$par.hide();$par.next(".eg-on").hide();$par.next().next().show();var p=(d.halfstars)?n*0.5:n;$par.parent().next("input").val(p);var m=$par.parent().find(".eg-rating");var l=d.smstarwidth*d.maxstars;var o=m.next().next();o.width(l);m.html(p);h(m.parent(),$par.parent(),p);c(n,o.children("div"))}function e(){var l=f(this).parent().parent().parent().next("input").val();var l=(d.halfstars)?l/0.5:l;j(f(this),l)}function k(){$par=f(this).parent();$par.hide();$par.prev().show();$par.prev().prev().show();$par.parent().animate({width:d.starwidth*d.maxstars},d.a_speed)}function a(){var s=(d.halfstars)?d.starwidth/2:d.starwidth;var p=(d.halfstars)?(d.starwidth/2)*(d.maxstars*2):d.starwidth*d.maxstars;var o=f("<div>",{"class":"eg-rtcont",width:p+"px"});var r=f("<div>",{"class":"eg-rated"});var q=f("<ul>");var n=f("<li>",{html:"&nbsp;",mouseover:b,mouseout:e,click:i,width:s+"px"});var l=(d.halfstars)?2*d.maxstars:d.maxstars;for($i=0;$i<l;$i++){n.clone(true).appendTo(q)}q.appendTo(f("<div>",{"class":"eg-rtbtns"}).appendTo(o));f("<div>",{"class":"eg-on",html:"&nbsp;"}).appendTo(o);f("<div>",{"class":"eg-rating",text:"0"}).appendTo(r);f("<div>",{"class":"eg-rtdash",text:"-"}).appendTo(r);f("<div>",{"class":"eg-smallstars",html:"<div>&nbsp;</div>"}).appendTo(r);if(d.allowedit){f("<div>",{"class":"eg-edit",text:"edit",click:k}).appendTo(r)}r.appendTo(o);return o}f.fn.elistars=function(l){if(l){f.extend(d,l)}return this.each(function(){a().clone(true).insertBefore(this);f(this).hide()})}})(jQuery);